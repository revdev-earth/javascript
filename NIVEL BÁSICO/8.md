# 8. Funciones Completas

## Declarations vs Expressions

```javascript
// Function Declaration - se eleva (hoisting)
saludar() // Funciona antes de declararla

function saludar() {
  console.log("Hola")
}

// Function Expression - NO se eleva
// despedir(); // Error
let despedir = function () {
  console.log("Adiós")
}

// Named Function Expression
let calcular = function sumar(a, b) {
  return a + b // 'sumar' solo existe dentro de la función
}
```

## Arrow Functions

```javascript
// Sintaxis tradicional
let sumar1 = function (a, b) {
  return a + b
}

// Arrow function - forma corta
let sumar2 = (a, b) => a + b

// Arrow function - forma larga
let sumar3 = (a, b) => {
  return a + b
}

// Con un parámetro
let duplicar = (x) => x * 2

// Sin parámetros
let saludar = () => console.log("Hola")

// Diferencias importantes:
// - No tienen su propio 'this'
// - No se pueden usar como constructores
// - No tienen 'arguments'
```

## Parameters/Arguments

```javascript
// Parámetros por defecto
function saludar(nombre = "Usuario") {
  console.log(`Hola ${nombre}`)
}

// Rest parameters - recoge argumentos extra
function sumar(...numeros) {
  return numeros.reduce((total, num) => total + num, 0)
}
sumar(1, 2, 3, 4) // 10

// Arguments object (solo en funciones normales)
function miFuncion() {
  console.log(arguments) // Array-like con todos los argumentos
  console.log(arguments.length)
}

// Destructuring en parámetros
function crearUsuario({ nombre, edad = 18 }) {
  return `${nombre}, ${edad} años`
}
crearUsuario({ nombre: "Ana", edad: 25 })
```

## Return Values

```javascript
// Return explícito
function sumar(a, b) {
  return a + b // Devuelve el resultado
}

// Sin return = undefined
function sinReturn() {
  console.log("Hago algo")
  // return undefined implícito
}

// Return múltiple con destructuring
function obtenerDatos() {
  return [1, 2, 3]
}
let [a, b, c] = obtenerDatos()

// Return objeto
function crearPersona(nombre, edad) {
  return { nombre, edad } // Shorthand property
}
```

## Recursión

```javascript
// Factorial recursivo
function factorial(n) {
  if (n <= 1) return 1 // Caso base
  return n * factorial(n - 1) // Llamada recursiva
}

// Fibonacci recursivo
function fibonacci(n) {
  if (n <= 1) return n
  return fibonacci(n - 1) + fibonacci(n - 2)
}

// Evitar stack overflow
function contarHasta(n, actual = 1) {
  if (actual > n) return
  console.log(actual)
  return contarHasta(n, actual + 1)
}
```

## IIFE (Immediately Invoked Function Expression)

```javascript
// IIFE básica
;(function () {
  console.log("Me ejecuto inmediatamente")
})()

// IIFE con parámetros
;(function (nombre) {
  console.log(`Hola ${nombre}`)
})("Juan")

// IIFE con arrow function
;(() => {
  console.log("IIFE con arrow")
})()

// Uso típico - evitar contaminar scope global
;(function () {
  let variablePrivada = "No contamino el global"
  // Código que se ejecuta una vez
})()
```
