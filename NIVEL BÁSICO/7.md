# 7. Scope y Contexto

## Global Scope

```javascript
// Variables globales - accesibles desde cualquier lugar
var global1 = "Soy global con var"
let global2 = "Soy global con let"
const global3 = "Soy global con const"

// Sin declaración = global implícito (malo)
function crearGlobal() {
  implicitoGlobal = "Peligroso" // Sin var/let/const
}

crearGlobal()
console.log(implicitoGlobal) // "Peligroso"
```

## Function Scope

```javascript
function miFuncion() {
  var funcionScoped = "Solo dentro de la función"

  if (true) {
    var tambienFuncionScoped = "var ignora los bloques"
  }

  console.log(tambienFuncionScoped) // Funciona - var es function scoped
}

// console.log(funcionScoped); // Error - no existe fuera
```

## Block Scope

```javascript
{
  let blockScoped = "Solo en este bloque"
  const tambienBlock = "const también es block scoped"
  var noEsBlock = "var ignora el bloque"
}

// console.log(blockScoped); // Error
// console.log(tambienBlock); // Error
console.log(noEsBlock) // "var ignora el bloque"

// Ejemplo práctico con bucles
for (let i = 0; i < 3; i++) {
  setTimeout(() => console.log(i), 100) // 0, 1, 2
}

for (var j = 0; j < 3; j++) {
  setTimeout(() => console.log(j), 100) // 3, 3, 3
}
```

## Lexical Scoping

```javascript
function exterior() {
  let variableExterior = "Desde exterior"

  function interior() {
    console.log(variableExterior) // Acceso lexical
  }

  return interior
}

let funcionInterior = exterior()
funcionInterior() // "Desde exterior" - mantiene acceso
```

## Scope Chain

```javascript
let nivel1 = "global"

function nivelA() {
  let nivel2 = "función A"

  function nivelB() {
    let nivel3 = "función B"

    // Busca en este orden: nivel3 → nivel2 → nivel1
    console.log(nivel3) // "función B"
    console.log(nivel2) // "función A"
    console.log(nivel1) // "global"
  }

  return nivelB
}
```

## Variable Shadowing

```javascript
let nombre = "Global"

function mostrarNombre() {
  let nombre = "Local" // "Sombrea" la variable global
  console.log(nombre) // "Local" - usa la más cercana
}

mostrarNombre() // "Local"
console.log(nombre) // "Global" - no se afectó

// Con parámetros también
function saludar(nombre) {
  // El parámetro sombrea el global
  console.log(`Hola ${nombre}`)
}
```
