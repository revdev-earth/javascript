# 2. Real-World Deployment y DevOps

En esta secci√≥n vemos c√≥mo preparar, desplegar y mantener aplicaciones JavaScript/Node.js en producci√≥n con un enfoque profesional y escalable.

## 1. Bundling Strategies

Optimizar y empaquetar el c√≥digo para producci√≥n.

- **Code splitting** ‚Üí cargar solo lo necesario.
- **Tree shaking** ‚Üí eliminar c√≥digo no usado.
- **Minificaci√≥n** ‚Üí reducir tama√±o.

**Ejemplo con Webpack:**

```javascript
module.exports = {
  mode: "production",
  optimization: {
    splitChunks: { chunks: "all" },
  },
};
```

## 2. Environment Configuration

Separar configuraci√≥n de desarrollo, pruebas y producci√≥n usando variables de entorno.

**Ejemplo con `.env`:**

```env
API_URL=https://api.miapp.com
DB_PASSWORD=supersecreto
```

**Cargar en Node.js:**

```javascript
import dotenv from "dotenv";
dotenv.config();
console.log(process.env.API_URL);
```

## 3. CDN Optimization

Usar redes de distribuci√≥n de contenido para servir est√°ticos m√°s r√°pido.

- **Compresi√≥n Gzip/Brotli**
- **HTTP/2 y HTTP/3**
- **Caching distribuido**

**Ejemplo:**

```html
<script src="https://cdn.jsdelivr.net/npm/vue@3"></script>
```

## 4. Monitoring

Detectar problemas antes de que afecten a los usuarios. Herramientas: **Prometheus**, **Grafana**, **Datadog**.

**Ejemplo b√°sico con Node.js health check:**

```javascript
app.get("/health", (req, res) => {
  res.status(200).json({ status: "OK" });
});
```

## 5. Logging

Registrar eventos y errores para auditor√≠a y depuraci√≥n. Herramientas: **Winston**, **Pino**, **Log4js**.

**Ejemplo con Winston:**

```javascript
import winston from "winston";
const logger = winston.createLogger({
  transports: [new winston.transports.Console()],
});
logger.info("Servidor iniciado");
```

## 6. Error Tracking

Capturar y analizar errores en producci√≥n. Herramientas: **Sentry**, **Rollbar**.

**Ejemplo con Sentry:**

```javascript
import * as Sentry from "@sentry/node";
Sentry.init({ dsn: process.env.SENTRY_DSN });
app.use(Sentry.Handlers.errorHandler());
```

## 7. Analytics Integration

Medir el uso de la aplicaci√≥n y el comportamiento del usuario. Herramientas: **Google Analytics**, **Mixpanel**, **Amplitude**.

**Ejemplo GA:**

```html
<script
  async
  src="https://www.googletagmanager.com/gtag/js?id=UA-XXXXXX"
></script>
<script>
  gtag("js", new Date());
  gtag("config", "UA-XXXXXX");
</script>
```

## 8. CI/CD Pipelines

Automatizar integraci√≥n, pruebas y despliegue. Herramientas: **GitHub Actions**, **GitLab CI**, **Jenkins**.

**Ejemplo GitHub Actions:**

```yaml
name: Deploy
on: push
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: npm install && npm run build
```

## 9. Containerization

Empaquetar la app con sus dependencias usando Docker para desplegar en cualquier entorno.

**Ejemplo Dockerfile:**

```dockerfile
FROM node:20
WORKDIR /app
COPY package*.json .
RUN npm install
COPY . .
EXPOSE 3000
CMD ["npm", "start"]
```

üí° **Tip:** El despliegue profesional no es solo "subir el c√≥digo", sino garantizar que tu aplicaci√≥n sea **r√°pida, segura, escalable y monitorizada**.
