# 1. API Design y Integration

En este nivel nos enfocamos en crear, consumir e integrar APIs de forma robusta, eficiente y segura.

## 1. REST Principles

REST (Representational State Transfer) es un estilo de arquitectura para APIs que usa HTTP. Principios clave:

- Recursos ‚Üí representados con URLs.
- Operaciones ‚Üí m√©todos HTTP (`GET`, `POST`, `PUT`, `DELETE`).
- Stateless ‚Üí cada petici√≥n es independiente.
- Representaciones ‚Üí JSON, XML, etc.

**Ejemplo:**

```http
GET /api/users/123
```

Respuesta:

```json
{
  "id": 123,
  "name": "Ana"
}
```

## 2. GraphQL

Alternativa a REST donde el cliente define qu√© datos necesita. Reduce overfetching y underfetching.

**Ejemplo de consulta:**

```graphql
query {
  user(id: 123) {
    name
    email
  }
}
```

Respuesta:

```json
{
  "data": {
    "user": {
      "name": "Ana",
      "email": "ana@email.com"
    }
  }
}
```

## 3. API Versioning

Mantener m√∫ltiples versiones para evitar romper clientes existentes.

**Ejemplo con versi√≥n en la URL:**

```http
GET /api/v1/users
GET /api/v2/users
```

O con encabezados:

```http
GET /api/users
Accept: application/vnd.myapi.v2+json
```

## 4. Rate Limiting

Limitar solicitudes para evitar abuso o sobrecarga.

**Ejemplo de respuesta cuando se excede el l√≠mite:**

```http
HTTP/1.1 429 Too Many Requests
Retry-After: 60
```

En Node.js con **express-rate-limit**:

```javascript
import rateLimit from "express-rate-limit";
const limiter = rateLimit({ windowMs: 1 * 60 * 1000, max: 100 });
app.use(limiter);
```

## 5. Authentication Strategies

- **API Key** ‚Üí simple, pero menos segura.
- **JWT (JSON Web Token)** ‚Üí m√°s seguro, sin estado.
- **OAuth 2.0** ‚Üí delega autenticaci√≥n a otro proveedor.

**Ejemplo JWT:**

```javascript
// Generar token
const token = jwt.sign({ userId: 123 }, "mi_secreto", { expiresIn: "1h" });
// Verificar token
jwt.verify(token, "mi_secreto");
```

## 6. Caching

Acelera respuestas y reduce carga de servidor.

**HTTP Cache-Control:**

```http
Cache-Control: public, max-age=3600
```

**Ejemplo en fetch con cache:**

```javascript
fetch("/api/data", { cache: "force-cache" });
```

## 7. Error Handling

Est√°ndar com√∫n: usar c√≥digos HTTP y mensajes claros.

**Ejemplo de respuesta de error:**

```http
HTTP/1.1 404 Not Found
Content-Type: application/json

{
  "error": "User not found",
  "code": 404
}
```

## 8. API Documentation

Documentar para que otros desarrolladores integren f√°cilmente. Herramientas: **Swagger/OpenAPI**, **Postman**, **Redoc**.

**Ejemplo OpenAPI (YAML):**

```yaml
paths:
  /users:
    get:
      summary: List all users
      responses:
        "200":
          description: A JSON array of users
```

üí° **Tip:** Siempre combina **buen dise√±o + seguridad + documentaci√≥n clara** para lograr APIs que sean f√°ciles de usar y mantener.
