# 13. Browser APIs Complete

Los navegadores modernos exponen una serie de APIs nativas que permiten a JavaScript interactuar con el entorno del navegador, el DOM, y servicios externos.

## 1. Fetch API

Interfaz moderna para realizar solicitudes HTTP de forma asÃ­ncrona.

**Ventajas sobre XMLHttpRequest:** sintaxis mÃ¡s limpia, promesas integradas, soporte para async/await.

```javascript
// GET request
async function getUser() {
  const res = await fetch("https://jsonplaceholder.typicode.com/users/1");
  const data = await res.json();
  console.log(data);
}
getUser();
```

ðŸ”¹ TambiÃ©n soporta opciones como mÃ©todos HTTP, cabeceras, y body para POST/PUT.
ðŸ”¹ Manejo de errores con try/catch.

## 2. Intersection Observer API

Permite detectar cuando un elemento entra o sale del viewport.

**Muy Ãºtil para:** lazy loading, animaciones al hacer scroll o detecciÃ³n de visibilidad.

```javascript
const observer = new IntersectionObserver((entries) => {
  entries.forEach((entry) => {
    if (entry.isIntersecting) {
      console.log("Elemento visible:", entry.target);
    }
  });
});

observer.observe(document.querySelector("#miElemento"));
```

## 3. Mutation Observer API

Detecta cambios en el DOM en tiempo real (nodos aÃ±adidos/eliminados, atributos modificados, etc.).

```javascript
const target = document.querySelector("#contenedor");
const observer = new MutationObserver((mutations) => {
  mutations.forEach((m) => console.log("Cambio detectado:", m));
});

observer.observe(target, { childList: true, attributes: true, subtree: true });
```

**ðŸ“Œ Usos:**

- Monitorear cambios dinÃ¡micos.
- Detectar inserciÃ³n de anuncios o widgets.
- Sincronizar estado de UI.

## 4. Resize Observer API

Observa cambios en el tamaÃ±o de un elemento, no solo en la ventana.

```javascript
const resizeObserver = new ResizeObserver((entries) => {
  for (let entry of entries) {
    console.log(
      "Nuevo tamaÃ±o:",
      entry.contentRect.width,
      entry.contentRect.height
    );
  }
});
resizeObserver.observe(document.querySelector("#caja"));
```

## 5. Web APIs comunes

### Geolocation API â†’ obtener ubicaciÃ³n GPS.

```javascript
navigator.geolocation.getCurrentPosition((pos) => {
  console.log(pos.coords.latitude, pos.coords.longitude);
});
```

### Web Storage API â†’ localStorage y sessionStorage para almacenar datos en el navegador.

```javascript
localStorage.setItem("user", "Nico");
console.log(localStorage.getItem("user"));
```

### Clipboard API â†’ copiar/pegar texto.

```javascript
navigator.clipboard.writeText("Hola").then(() => console.log("Copiado!"));
```

### Fullscreen API â†’ activar pantalla completa.

```javascript
document.documentElement.requestFullscreen();
```

### Notification API â†’ mostrar notificaciones del sistema.

```javascript
Notification.requestPermission().then(
  () => new Notification("Hola desde el navegador")
);
```

## 6. Experimental Features

Son APIs en desarrollo, accesibles en algunos navegadores bajo flags:

- **File System Access API** â†’ leer/escribir archivos locales.
- **WebGPU API** â†’ acceso a GPU para grÃ¡ficos 3D avanzados.
- **Web Speech API** â†’ reconocimiento y sÃ­ntesis de voz.
- **Native File Drag-and-Drop.**

### Ejemplo con Web Speech API:

```javascript
const utterance = new SpeechSynthesisUtterance("Hola mundo");
speechSynthesis.speak(utterance);
```

## 7. Polyfills

CÃ³digo que imita funciones de APIs modernas para navegadores antiguos.

**Ejemplo:** soporte a fetch en IE11.

```html
<script src="https://cdn.jsdelivr.net/npm/whatwg-fetch@3.6.2/dist/fetch.umd.min.js"></script>
```

### ðŸ“Œ Resumen prÃ¡ctico:

| API                   | Uso principal                           |
| --------------------- | --------------------------------------- |
| Fetch API             | Peticiones HTTP modernas                |
| Intersection Observer | Detectar visibilidad de elementos       |
| Mutation Observer     | Escuchar cambios en el DOM              |
| Resize Observer       | Detectar cambios de tamaÃ±o en elementos |
| Geolocation API       | Obtener ubicaciÃ³n GPS                   |
| Web Storage API       | Guardar datos en el navegador           |
| Clipboard API         | Copiar/pegar desde el portapapeles      |
| Fullscreen API        | Pantalla completa                       |
| Notification API      | Notificaciones del sistema              |
| Experimental Features | Probar APIs en desarrollo               |
| Polyfills             | Compatibilidad con navegadores antiguos |
