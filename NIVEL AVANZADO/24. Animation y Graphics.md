# 24. Animation y Graphics

Las animaciones y los gr√°ficos enriquecen la experiencia de usuario, pero si se implementan mal pueden ralentizar la aplicaci√≥n. La clave est√° en **elegir la API adecuada, optimizar y sincronizar con el render del navegador**.

## 1. CSS Animations from JS

Aunque CSS soporta animaciones con `@keyframes` y transiciones, muchas veces queremos controlarlas desde JavaScript.

- Usar clases para iniciar animaciones.
- Controlar velocidad, pausa y repetici√≥n con propiedades CSS.
- Modificar variables CSS desde JS (`document.documentElement.style.setProperty()`).

**Ejemplo:**

```css
@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.fade {
  animation: fadeIn 1s ease-in forwards;
}
```

```javascript
element.classList.add("fade");
```

## 2. Canvas API

Permite dibujar gr√°ficos 2D pixel a pixel.

- Ideal para juegos, visualizaciones y animaciones personalizadas.
- Se basa en un contexto (`2d`) que expone m√©todos como `fillRect`, `arc`, `drawImage`.

**Ejemplo:**

```javascript
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");
ctx.fillStyle = "red";
ctx.fillRect(10, 10, 100, 100);
```

## 3. WebGL Basics

WebGL es la API para gr√°ficos 3D acelerados por GPU en el navegador.

- Basado en OpenGL ES 2.0.
- Ideal para gr√°ficos 3D, simulaciones y experiencias inmersivas.
- Funciona con shaders para control absoluto sobre el renderizado.

**Ejemplo m√≠nimo (inicializaci√≥n):**

```javascript
const gl = canvas.getContext("webgl");
if (!gl) console.error("WebGL no soportado");
```

## 4. requestAnimationFrame

API que sincroniza las animaciones con la frecuencia de refresco del navegador (normalmente 60fps).

- M√°s eficiente que `setInterval`.
- El navegador puede pausar animaciones en pesta√±as inactivas para ahorrar recursos.

**Ejemplo:**

```javascript
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  // l√≥gica de animaci√≥n aqu√≠
  requestAnimationFrame(draw);
}
draw();
```

## 5. Performance Optimization

### Claves:

- Evitar recalcular estilos y layouts innecesarios.
- Usar `transform` y `opacity` en CSS para animaciones m√°s r√°pidas (GPU-friendly).
- Limitar la cantidad de elementos animados simult√°neamente.
- En Canvas/WebGL, limpiar y redibujar solo lo necesario.

## 6. Graphics Libraries Integration

Hay librer√≠as que facilitan la creaci√≥n de animaciones y gr√°ficos:

- **GSAP** ‚Üí animaciones complejas con JS.
- **Three.js** ‚Üí gr√°ficos 3D con WebGL simplificado.
- **PixiJS** ‚Üí gr√°ficos 2D acelerados por GPU.
- **D3.js** ‚Üí visualizaci√≥n de datos.
- **Anime.js** ‚Üí animaciones declarativas.

**Ejemplo con GSAP:**

```javascript
gsap.to(".box", {
  x: 200,
  duration: 2,
  ease: "power1.inOut",
});
```

## üìå Tips pro:

- Animaciones = mejorar UX, no distraer.
- Sincroniza animaciones largas con interacciones del usuario.
- Testea en dispositivos de gama baja para detectar ca√≠das de FPS.
