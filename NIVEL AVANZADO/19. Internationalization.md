# 19. Internationalization (i18n)

La **Internationalization** (abreviado _i18n_, porque hay 18 letras entre la "i" y la "n") es el conjunto de técnicas para que una aplicación pueda adaptarse a distintos idiomas, zonas horarias, y formatos numéricos/fechas, sin modificar el código base.

JavaScript ofrece la `Intl` API, que está optimizada y soporta la mayoría de convenciones culturales del mundo.

## 1. Intl API

Objeto global para internacionalización.

**Soporta:**

- Formateo de números y monedas.
- Fechas y horas.
- Comparación y ordenamiento de strings (_collation_).
- Pluralización.
- Manejo de zonas horarias.

```javascript
new Intl.NumberFormat("de-DE").format(1234567.89);
// "1.234.567,89"
```

## 2. Locale Handling

- Los _locales_ definen idioma + región (ej. `"en-US"`, `"es-ES"`, `"fr-CA"`).
- Puedes pasar uno o varios locales para que el motor escoja el más cercano.

### Detección automática:

```javascript
const userLocale = navigator.language; // ej. "es-CO"
```

### Fallbacks:

```javascript
new Intl.NumberFormat(["fr-CA", "en-US"]);
```

## 3. Number Formatting

Usando `Intl.NumberFormat`:

```javascript
new Intl.NumberFormat("es-ES", {
  style: "currency",
  currency: "EUR",
}).format(1234.5);
// "1.234,50 €"
```

### Opciones:

- **`style`:** `"decimal"`, `"currency"`, `"percent"`.
- **`minimumFractionDigits`** y **`maximumFractionDigits`**.
- Separadores según la convención del idioma.

## 4. Date Formatting

`Intl.DateTimeFormat`:

```javascript
new Intl.DateTimeFormat("en-GB", {
  dateStyle: "full",
  timeStyle: "short",
}).format(new Date());
// "Tuesday, 12 August 2025 at 15:42"
```

### Opciones clave:

- **`dateStyle`:** `"short"`, `"medium"`, `"long"`, `"full"`.
- **`timeZone`:** `"America/Bogota"`, `"UTC"`, etc.
- **`hour12`:** `true` o `false`.

## 5. Collation

Ordenar strings de acuerdo a reglas lingüísticas:

```javascript
["árbol", "zapato", "avión"].sort(new Intl.Collator("es").compare);
// ["árbol", "avión", "zapato"]
```

- Respetar acentos y mayúsculas según cultura.

## 6. Plural Rules

`Intl.PluralRules` para elegir texto según cantidad:

```javascript
const pr = new Intl.PluralRules("en-US");
console.log(pr.select(1)); // "one"
console.log(pr.select(2)); // "other"
```

### Útil para mostrar mensajes dinámicos:

```javascript
function itemMessage(count, locale) {
  const pr = new Intl.PluralRules(locale);
  return pr.select(count) === "one" ? "1 item" : `${count} items`;
}
```

## 7. Timezone Handling

Formatear fechas en zonas horarias específicas:

```javascript
new Intl.DateTimeFormat("es-CO", {
  timeZone: "America/Bogota",
  timeStyle: "short",
}).format(new Date());
```

- Muy útil para aplicaciones globales con usuarios en distintos países.

## Ejemplo práctico combinando todo:

```javascript
const locale = navigator.language; // ej. "es-MX"

const currency = new Intl.NumberFormat(locale, {
  style: "currency",
  currency: "MXN",
}).format(2599.99);

const date = new Intl.DateTimeFormat(locale, {
  dateStyle: "long",
  timeZone: "America/Mexico_City",
}).format(new Date());

console.log(`Precio: ${currency} — Fecha: ${date}`);
```

### Salida (en `"es-MX"`):

```yaml
Precio: $2,599.99 — Fecha: 12 de agosto de 2025
```
