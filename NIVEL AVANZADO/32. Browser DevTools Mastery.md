# 32. Browser DevTools Mastery

Dominar las **Developer Tools** de tu navegador te convierte en un cirujano del código: puedes detectar, aislar y reparar problemas con precisión.

## 1. Performance Profiling

Mide cuánto tarda tu aplicación en cargar, renderizar y ejecutar código.

**Ejemplo:**

```javascript
console.time("carga-pagina");
// Simulación de trabajo pesado
for (let i = 0; i < 1e7; i++) {}
console.timeEnd("carga-pagina");
```

📌 Abre **Performance** → Grabar → Ejecuta la acción → Detén y analiza el timeline.

## 2. Memory Analysis

Encuentra fugas de memoria (**memory leaks**) y uso excesivo de RAM.

**Ejemplo:**

```javascript
let fuga = [];
function crearFuga() {
  fuga.push(new Array(1_000_000).fill("💾"));
}
setInterval(crearFuga, 1000);
```

📌 En DevTools: **Memory** → "Take Heap Snapshot" antes y después → Verifica que `Array` crece sin liberarse.

## 3. Network Debugging

Depura solicitudes y analiza tiempos de carga.

**Ejemplo:**

```javascript
fetch("https://jsonplaceholder.typicode.com/posts")
  .then((r) => r.json())
  .then(console.log);
```

📌 En **Network**:

- Filtra por `XHR`.
- Inspecciona Headers y Response.
- Comprueba si se habilitó **CORS** correctamente.

## 4. Source Maps

Depura código TypeScript o minificado viendo el original.

**Ejemplo:**

- `webpack.config.js`:

```javascript
module.exports = {
  devtool: "source-map",
};
```

📌 En DevTools, el archivo minificado aparecerá enlazado al original y podrás poner breakpoints en TS o ES6.

## 5. Breakpoint Strategies

Tipos de breakpoints para depuración precisa.

**Ejemplo:**

```javascript
function calcular(x) {
  return x > 5 ? "grande" : "pequeño";
}
calcular(6);
```

📌 En DevTools:

- **Breakpoint condicional** en `return...` con:

```javascript
x > 5;
```

- **DOM breakpoint** en un botón para detectar quién lo modifica.

## 6. Custom DevTools Extensions

Crea paneles personalizados dentro de DevTools.

**Ejemplo:** `manifest.json`

```json
{
  "name": "MiPanel",
  "version": "1.0",
  "manifest_version": 3,
  "devtools_page": "panel.html"
}
```

📌 Esto agrega un panel nuevo en DevTools para inspeccionar tu app con lógica personalizada.

## 7. Lighthouse Auditing

Audita rendimiento, accesibilidad y SEO.

**Ejemplo:**

- Abre **Lighthouse**.
- Selecciona "Performance" + "Mobile".
- Ejecuta auditoría y obtén sugerencias como "Usar imágenes WebP".

## 8. Coverage Analysis

Mide cuánto CSS y JS está realmente en uso.

**Ejemplo:**

- `Ctrl+Shift+P` → "Show Coverage".
- Verás, por ejemplo:

```css
/* styles.css */
.button {
  color: red;
} /* usado */
.hidden {
  display: none;
} /* no usado */
```

📌 Esto permite eliminar estilos y scripts muertos.

## 9. Heap Snapshots

Compara estado de memoria entre acciones.

**Ejemplo:**

```javascript
let cache = [];
document.querySelector("#boton").addEventListener("click", () => {
  cache.push(new Array(1_000_000).fill("🔍"));
});
```

📌 Heap snapshot antes y después de pulsar el botón → Detecta que los objetos siguen en memoria.
